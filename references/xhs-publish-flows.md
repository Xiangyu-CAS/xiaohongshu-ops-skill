# XHS Publish Flows

本文件拆分并细化「发布链路」的操作步骤，供 `SKILL.md` 按需引用。

## 0. 总览

发布类型：
- 视频
- 图文
- 长文

三要素（发布前必须齐全）：
1. 封面
2. 标题
3. 正文

## 1. 图文发布（推荐默认）

### 1.1 上传图文（普通）
1. 打开发布页并进入「上传图文」
2. 上传首图/多图
3. 填写标题（建议 <=20 字）
4. 填写正文
5. 追加话题/标签（放正文末尾）
6. 校验三要素后停在发布按钮（待用户确认）

### 1.2 图文-文字配图（大字报）
1. 进入「上传图文」
2. 点击「文字配图」
3. 输入封面大字报文案
4. 点击「生成图片」
5. 在模板页选择样式并点「下一步」
6. 进入编辑页填写：标题、正文、话题/标签
7. 校验三要素后停在发布按钮（待用户确认）

### 1.3 图文半程预发（不发布）
满足以下条件即视为“半程预发完成”：
- 已完成封面生成（或上传）
- 已进入编辑页
- 已填写标题与正文
- 仅停在「发布」按钮可见处，未点击发布

### 1.4 图文上传（外部生成封面）
适用于 Nano Banana / 外部工具先产图，再走图文发布的场景。

前置说明（提一句即可）：如未安装生图技能，可先执行 `clawhub install nano-banana-pro`。

1. 先确认封面图已生成（推荐 PNG/JPG）
2. 若使用 browser.upload：先将图片复制到 `/tmp/openclaw/uploads`
3. 进入「上传图文」后优先点击「上传图片」
4. 上传封面图并确认进入编辑页（可见图片编辑区 + 标题/正文输入框）
5. 填写标题、正文、标签
6. 发布前强校验：
   - 标题长度建议 `<=20`（出现 `xx/20` 超限需先压缩）
   - 三要素齐全（封面/标题/正文）
7. 停在发布按钮，等待用户确认

## 2. 视频发布

1. 进入「上传视频」
2. 上传视频文件
3. 补齐封面/标题/正文
4. 校验可见范围与设置
5. 发布前等待用户确认

## 3. 长文发布

1. 进入「写长文」
2. 新建创作或导入链接
3. 填写长文标题与正文结构
4. 若用户目标是图文，避免误走长文链路

## 4. 常见问题与处理

- 误入长文：返回发布笔记，明确切回「上传图文」
- 草稿箱默认视频：切换到「图文笔记」tab后再编辑
- 标题超限：出现 `xx/20` 时立刻压缩
- 只做了封面没填文案：必须补齐标题与正文
- 网页端详情扫码限制：评论优先在通知页处理，必要时改 App 端
- 上传图文入口重复（双 tab）：第一个入口失败后，立刻尝试第二个入口并 snapshot 校验
- `browser.upload` 路径报错：仅允许 `/tmp/openclaw/uploads`，先 `cp` 后上传
- 最后点击发布时报元素失效：先 snapshot 刷新引用；仍失败则提示用户手动点击「发布」
